<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Split View — Characters & Weapons</title>
  <style>
    :root{
      --brand:#ffbd59;
      --bg:#0e0e0e;
      --panel:#1b1b1b;
      --ink:#f5f5f5;
      --header-h:56px;
      --divider-w:4px;
      --min-pane:200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Arial,sans-serif}

    /* Header */
    header{
      height:var(--header-h);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 14px;
      background:linear-gradient(180deg,#1a1a1a 0%, #121212 100%);
      border-bottom:3px solid var(--brand);
      position:sticky; top:0; z-index:10;
    }
    .title{font-weight:800; letter-spacing:.3px}
    .actions{display:flex; gap:8px; align-items:center}
    .btn{
      appearance:none; border:1px solid #333; border-radius:10px;
      background:#222; color:#eee; padding:8px 12px; cursor:pointer; font-weight:700;
    }
    .btn.brand{background:var(--brand); color:#181818; border-color:#000}
    .btn.link{background:transparent; border:1px solid #333; color:#ddd; text-decoration:none; display:inline-flex; align-items:center; gap:6px}
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}

    /* Split area */
    .workspace{
      height:calc(100vh - var(--header-h));
      display:flex;
      overflow:hidden;
      background:var(--panel);
    }
    iframe{
      height:100%;
      border:0;
      background:#0f0f0f;
    }
    .left{flex:0 0 40%}   /* initial 2/5 */
    .right{flex:0 0 60%}  /* initial 3/5 */
    .divider{
      width:var(--divider-w);
      background:var(--brand);
      cursor:col-resize;
      box-shadow:0 0 0 1px #000 inset;
    }
    .divider.dragging{filter:brightness(1.15)}
  </style>
</head>
<body>

  <header>
    <div class="title">Split View — Characters & Weapons</div>
    <div class="actions">
      <a class="btn link" href="dashboard.html">← Back to Dashboard</a>
      <button class="btn brand" id="resetSplitBtn">Reset Split (2/5 · 3/5)</button>
    </div>
  </header>

  <div class="workspace" id="workspace">
    <iframe class="left"  id="paneLeft"  src="char.html"   title="Characters"></iframe>
    <div class="divider"  id="divider"   title="Drag to resize"></div>
    <iframe class="right" id="paneRight" src="weapon.html"  title="Weapons"></iframe>
  </div>

  <script>
    (function(){
      const divider = document.getElementById('divider');
      const work    = document.getElementById('workspace');
      const left    = document.getElementById('paneLeft');
      const right   = document.getElementById('paneRight');
      const reset   = document.getElementById('resetSplitBtn');

      const DIV_W = parseInt(getComputedStyle(divider).width, 10) || 4;
      const MIN   = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--min-pane'), 10) || 200;

      let isDragging = false;
      let leftRatio  = 0.40; // start at 2/5

      function applyWidthsByRatio(ratio){
        const rect = work.getBoundingClientRect();
        const total = rect.width;
        const leftW = Math.max(MIN, Math.min(total - DIV_W - MIN, Math.round(total * ratio)));
        const rightW = total - DIV_W - leftW;
        left.style.flex  = `0 0 ${leftW}px`;
        right.style.flex = `0 0 ${rightW}px`;
      }

      function startDrag(e){
        isDragging = true;
        divider.classList.add('dragging');
        document.addEventListener('mousemove', onDrag);
        document.addEventListener('mouseup',   stopDrag);
      }

      function onDrag(e){
        if(!isDragging) return;
        const rect = work.getBoundingClientRect();
        let x = e.clientX - rect.left; // position within workspace
        // clamp to respect min widths
        x = Math.max(MIN, Math.min(x, rect.width - DIV_W - MIN));
        leftRatio = x / rect.width;
        applyWidthsByRatio(leftRatio);
      }

      function stopDrag(){
        isDragging = false;
        divider.classList.remove('dragging');
        document.removeEventListener('mousemove', onDrag);
        document.removeEventListener('mouseup',   stopDrag);
      }

      function resetSplit(){
        leftRatio = 0.40; // 2/5
        applyWidthsByRatio(leftRatio);
      }

      // Keep ratio on window resize
      function handleResize(){
        applyWidthsByRatio(leftRatio);
      }

      divider.addEventListener('mousedown', startDrag);
      reset.addEventListener('click', resetSplit);
      window.addEventListener('resize', handleResize);

      // Also allow double-click on divider to reset
      divider.addEventListener('dblclick', resetSplit);

      // Initial apply
      resetSplit();
    })();
  </script>

</body>
</html>
